<!doctype html>
<html lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109072453-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-109072453-1');
  </script>
  <meta charset="utf-8">
  <title>Philot - Safari's default 'new tab' is so bad I built my own with Svelte and AirTable</title>

  <link rel="shortcut icon" href="/assets/images/favicon.ico" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="My journey with mainstream web browsers has been interesting, to say the least. After using Chrome for many years, I decided to move to Firefox. Then Firefox...">

  <meta property="og:site_name" content="">
  
  <meta property="og:title" content="Safari's default 'new tab' is so bad I built my own with Svelte and AirTable">
  <meta property="og:type" content="article">
  <meta property="og:description" content="My journey with mainstream web browsers has been interesting, to say the least. After using Chrome for many years, I decided to move to Firefox. Then Firefox Nightly. Then I made another move to Firefox Developer Edition, and I thought my journey was over. I had found the perfect browser.
"/>
  
  
  <meta property="article:published_time" content="2021-01-05T00:00:00-05:00">
  <meta property="article:author" content="/about/">
  
  <meta property="og:url" content="/2021/01/05/building-a-new-start-page-with-svelte.html" />
  
  <meta itemprop="keywords" content="" />
  
  
   
  
  <meta property="og:image" content="https://www.philot.ca/assets/images/philot-meta-default.jpg">
  
  <meta name="twitter:site" content="@vphilot">
  <link rel="stylesheet" href="/assets/css/styles.css">
  <script src="/assets/js/swup.js"></script>
  <script src="/assets/js/app.js"></script>
</head>

<body>
  <nav class="swup">
    <div class="navigation__toggle is-hidden-desktop"></div>
<nav class="level" id="navigation">
  <div class="container has-padding-lr-1">
    <div class="level-left">
    </div>
    <div class="level-right is-uppercase">
      
      <div class="column is-1-desktop is-size-7 has-spacing-lg has-text-right">
        <a href="/" >
          Home
        </a>
      </div>
      
      <div class="column is-1-desktop is-size-7 has-spacing-lg has-text-right">
        <a href="/about.html" >
          About
        </a>
      </div>
      
      <div class="column is-1-desktop is-size-7 has-spacing-lg has-text-right">
        <a href="/blog.html" >
          Blog
        </a>
      </div>
      
      <div class="column is-1-desktop is-size-7 has-spacing-lg has-text-right">
        <a href="/works.html" >
          Work
        </a>
      </div>
      
    </div>
  </div>
</nav>
    <section class="section" id="header">
    <div class="container has-padding-lr-1">

        <div class="columns is-mobile is-multiline is-vbaseline">
            <div class="column is-4-desktop is-8-mobile">
                <h1 class="title is-1"><a href="/">Vinícius Philot</a></h1>
            </div>
            <div class="column is-3-desktop is-8-mobile">
                <p class="has-spacing-sm is-size-7">Front End UI Developer</p>
            </div>
            <div class="column is-3-desktop is-6-mobile has-spacing-sm">
                <a href="mailto:vphilo@gmail.com?subject=Hey%2C%20nice%20site%20you%20have">
                    <p class="has-spacing-sm is-size-7">vphilot@gmail.com</p>
                </a>
                </div>
            <div class="column is-2-desktop is-12-mobile">
                <a 
                aria-label="check my Linkedin in a new tab" 
                href="https://www.linkedin.com/in/vphilot/?locale=en_US" 
                target="_blank"
                tabindex="0"
                >
                    <i aria-hidden="true" class="icon icon-linkedin">&#xf0e1;</i>
                </a>
                <a 
                aria-label="check my Twitter in a new tab" 
                href="https://twitter.com/vphilot" 
                target="_blank"
                tabindex="0"
                >
                    <i aria-hidden="true" class="icon icon-twitter">&#xf099;</i>
                </a>
                <a 
                aria-label="check my Instagram in a new tab"
                href="https://instagram.com/vphilot" 
                target="_blank"
                tabindex="0"
                >
                    <i aria-hidden="true" class="icon icon-instagram">&#xf16d;</i>
                </a>
                <a 
                aria-label="check my Github in a new tab" 
                href="https://github.com/vphilot" 
                target="_blank"
                tabindex="0"
                >
                    <i aria-hidden="true" class="icon icon-github">&#xf113;</i>
                </a>
                <a 
                aria-label="check my Codepen in a new tab" 
                href="https://codepen.io/vphilot/" 
                target="_blank"
                tabindex="0"
                >
                    <i aria-hidden="true" class="icon icon-codepen">&#xf32c;</i>
                </a>
                <a 
                aria-label="check my Spotify in a new tab" 
                href="https://open.spotify.com/user/12183629233" 
                target="_blank"
                tabindex="0"
                >
                    <i aria-hidden="true" class="icon icon-spotify">&#xf1bc;</i>
                </a>
            </div>
        </div>
    </div>
</section>
  </nav>
  <main class="swup transition-fade"   style="background-color: #f4f4f4" >
    <section class="section" id="post-safari's default 'new tab' is so bad i built my own with svelte and airtable">
    <div class="container has-padding-lr-1">
        <div class="columns is-mobile is-multiline is-centered">
            <div class="column is-8-desktop is-12-mobile">
                <h1 class="title is-1 has-spacing-sm swup-delay transition-slide">Safari's default 'new tab' is so bad I built my own with Svelte and AirTable</h1>
                <div class="columns is-mobile is-multiline">
                    <div class="column is-5-desktop is-6-mobile has-spacing-sm">
                        <p class="has-spacing-sm is-size-6 has-border-black swup-delay transition-slide">
                            05 Jan 2021
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <article class="swup-delay transition-fade">
            <div class="columns is-mobile is-multiline is-centered">
                <div class="column is-8-desktop is-12-tablet is-12-mobile">
                    <p>My journey with mainstream web browsers has been interesting, to say the least. After using Chrome for many years, I decided to move to Firefox. Then Firefox Nightly. Then I made another move to Firefox Developer Edition, and I thought my journey was over. I had found the perfect browser.</p>

<p>Being a web developer sometimes means having 50 tabs opened simultaneously, and keeping another 50 you have to check eventually but not right now. I know there are many tab management add-ons out there, but I never found any that was particularly fit for my workflow. I was observing that over time and under a heavy load Firefox can have a hefty battery and memory management toll on my computer (similar to what happened to Chrome and made me leave it, albeit a little better) and it was time to try another browser.</p>

<p>I chose Safari. I know, now the most obvious choice for a web developer, but my idea was having a daily choice for browsing and still keeping Firefox Developer Edition and Chrome for testing and troubleshooting.</p>

<h3 class="intro title is-3 has-text-weight-normal has-line-spacing-tall" id="so-whats-wrong-with-safari">So what’s wrong with Safari?</h3>

<p>Not much, really. It’s WebKit based, so most modern technologies are supported without a lot of trouble (I mean polyfills and fallbacks). It’s also important to know that Safari seems to focus a lot more on stability than performance, making it feel a little slower than Firefox or Chrome. But I really wanted to be able to keep my 80+ tabs open without having my battery drop 50% an hour and see my RAM usage in a constant spike.</p>

<p>The most problematic feature of Safari in my opinion is the New Tab implementation. While Chrome and Firefox will let you move favourites around, pin new URLs, and delete the ones you don’t see fit, Safari has a very (very Apple-Esque) rigid implementation where you can either choose to see your <strong>Top Sites</strong> (the ones you visit most frequently), your <strong>Favourites</strong> (the ones you actively bookmarked), or both. It’s impossible to move them around, remove them, or pin your most used ones:</p>

<p><img src="/assets/images/post/2021-01-01.jpg" alt="Safari's new tab" title="Safari's new tab" /></p>

<h3 class="intro title is-3 has-text-weight-normal has-line-spacing-tall" id="the-stack-and-why-svelte">The stack and why Svelte?</h3>

<p>Working with React and/or Vue on a daily basis, it’s very likely that you probably heard of <a href="https://svelte.dev">Svelte</a>. As a JavaScript framework, it promises to eliminate abstraction layers we take for granted now (such as the Virtual DOM) to deliver highly performant web apps. It also has a very modest footprint compared to most mainstream frameworks. Since I never had a chance to use it before, I thought this small side project would be an interesting chance to experiment with it.</p>

<p>To get started, I just replicated the starter project:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npx degit sveltejs/template new-tab
<span class="nv">$ </span><span class="nb">cd </span>new-tab
<span class="nv">$ </span>npm i
</code></pre></div></div>

<h3 class="intro title is-3 has-text-weight-normal has-line-spacing-tall" id="storing-and-retrieving-data-with-airtable">Storing and retrieving data with Airtable</h3>

<p><a href="https://svelte.dev">AirTable</a> is an awesome spreadsheet-database hybrid that I believe is perfect for this use case. We want to be able to update entries on the cloud and have it reflected on the front end as quickly as possible. Setting up a whole back end for this would be just overkill. Airtable also exposes your data as an API out of the box. Creating your first document is just as simple as looking at a spreadsheet and start typing:</p>

<p><img src="/assets/images/post/2021-01-02.jpg" alt="a simple Airtable document" title="a simple Airtable document" /></p>

<p>One interesting thing about the service is that it only exposes its more complex features as you need them. In this case, I wanted each entry to have a unique colour - so I specified a new entity type with a default value:</p>

<p><img src="/assets/images/post/2021-01-03.jpg" alt="entry types in Airtable" title="entry types in Airtable" /></p>

<p>Retrieving this data is just as fetching the API with Svelte’s <code class="language-plaintext highlighter-rouge">onMount</code> hook inside <code class="language-plaintext highlighter-rouge">App.svelte</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">let</span> <span class="nx">links</span> <span class="o">=</span> <span class="kc">null</span>

  <span class="nx">onMount</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span>
      <span class="s2">`https://api.airtable.com/v0/appbHvOKjQPdszt4L/new-tab?api_key=</span><span class="p">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">AIRTABLE_API_KEY</span><span class="p">}</span><span class="s2">&amp;view=Grid%20view`</span>
    <span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">links</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">records</span>
      <span class="p">})</span>
  <span class="p">})</span>
</code></pre></div></div>

<p>And rendering the links list using Svelte’s template syntax (<code class="language-plaintext highlighter-rouge">#</code>):</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"links-section"</span><span class="nt">&gt;</span>
  {#if links}
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"links-wrapper"</span><span class="nt">&gt;</span>
      {#each links as link}
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"link"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"link-badge"</span> <span class="na">style=</span><span class="s">"background-color: {link.fields.Colour}"</span> <span class="nt">&gt;&lt;/i&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"link-button"</span> <span class="na">onclick=</span><span class="s">"location.href='{link.fields.URL}'"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>
              {link.fields.Name}
            <span class="nt">&lt;/button&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      {/each}
    <span class="nt">&lt;/div&gt;</span>
  {/if}
<span class="nt">&lt;/section&gt;</span>
</code></pre></div></div>

<h3 class="intro title is-3 has-text-weight-normal has-line-spacing-tall" id="google-search-and-a-few-tweaks">Google search and a few tweaks</h3>

<p><img src="/assets/images/post/2021-01-05.jpg" alt="New tab v0" title="new tab v0" /></p>

<p>After having the an initial version setup, it was time to add a basic Google search module and tweak the styling a little bit:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"search"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">on:submit</span><span class="err">|</span><span class="na">preventDefault=</span><span class="s">{handleSubmit}</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">autofocus</span> <span class="na">bind:value=</span><span class="s">{searchValue}</span> <span class="na">placeholder=</span><span class="s">"Google Search"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">const</span> <span class="nx">handleSubmit</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
	  <span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s2">`http://www.google.com/search?q=</span><span class="p">${</span><span class="nx">searchValue</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div></div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">body</span> <span class="p">{</span>
  <span class="c">/* making sure the new tabs fonts are aligned with MacOS system fonts: */</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="n">-apple-system</span><span class="p">,</span> <span class="n">BlinkMacSystemFont</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/assets/images/post/2021-01-06.jpg" alt="New tab v0.1" title="new tab v0.1" /></p>

<h3 class="intro title is-3 has-text-weight-normal has-line-spacing-tall" id="deploying-performance-and-wrap-up">Deploying, performance, and wrap up</h3>

<p>Deploying the app to <a href="https://netlify.com/">Netlify</a> was just as simple as connecting the repo, setting the build command to <code class="language-plaintext highlighter-rouge">npm run build</code> and setting the correct <code class="language-plaintext highlighter-rouge">AIRTABLE_API_KEY</code> environment variable (sites -&gt; settings -&gt; Environment -&gt; Edit variables).</p>

<p>Just by using simple semantic HTML and Svelte, the page got a 99 score on Lighthouse out of the box which, even given the simplicity, is pretty impressive:</p>

<p><img src="/assets/images/post/2021-01-04.jpg" alt="New tab v0.1" title="new tab v0.1" /></p>

<p>After that, it was just a matter of setting my new tab on Safari to default to the deployed page. My first experience with Svelte was great - it’s extremely simple to use and behaves as you expect. I’m excited to try using it for more complex projects in the future.</p>


                </div>
            </div>
        </article>
        <div class="columns is-mobile is-multiline is-centered">
            <div class="column is-8-desktop is-12-mobile">
                <div class="columns is-mobile is-multiline is-centered">
                    
                        <div class="column is-4-desktop is-6-mobile">
                            <a href="/2020/08/18/javascript-get-element-next-sibling-copy.html">
                                <h1 class="intro title is-4 has-text-weight-light has-line-spacing-tall has-text-left">
                                    Prev
                                </h1>
                                <svg x="0px" y="0px" viewBox="0 0 200 10">
                                    <polyline points="6,0 1,5 6,10 " />
                                    <line x1="1" y1="5" x2="200" y2="5" />
                                </svg>
                            </a>
                        </div>
                    
                    <div class="column is-4-desktop is-hidden-mobile">
                    </div>
                    
                        <div class="column is-4-desktop is-hidden-mobile">
                        </div>
                    
                </div>
            </div>
        </div>

    </div>
</section>
    <section id="footer" class="container has-padding-1">
    <div class="columns is-multiline is-centered">
        <div class="column is-12">
            <p class="is-size-7 has-text-grey has-spacing-sm">This website was developed with <i class="icon icon-heart-empty" aria-hidden="true">&#xe800;</i> and <a
                    href="https://github.com" target="_blank" id="footerDisplay">github</a> </p>
        </div>
    </div>
</div>
  </main>


</body>


</html>